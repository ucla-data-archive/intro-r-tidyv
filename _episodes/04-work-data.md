---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 04-work-data.md in _episodes_rmd/
title: "Working with Data"
author: "Tim Dennis"
date: "2019-01-28"
output: html_document
---



## Explore your first dataset {#nycflights13}

* Let's put everything we've learned so far into practice and start exploring some real data! 
* Data comes to us in a variety of formats, from pictures to text to numbers.  
* we'll focus on datasets that are saved in "spreadsheet"-type format; this is probably the most common way data are collected and saved in many fields.  
* these "spreadsheet"-type datasets are called _data frames_ in R; we will focus on working with data saved as data frames throughout this book.

* Let's first load all the packages needed for this chapter, assuming you've already installed them. 


~~~
library(nycflights13)
library(dplyr)
library(knitr)
~~~
{: .language-r}

* At the beginning of all subsequent chapters in this text, we'll always have a list of packages that you should have installed and loaded to work with that chapter's R code. 

### `nycflights13` package

* Many of us have flown on airplanes or know someone who has.
* And you know or have experienced that some flights are delayed because of a variety of conditions. 
* Are there ways that we can avoid having to deal with these flight delays?  

today, we're going to analyze data related to flights contained in the `nycflights13` package [@R-nycflights13].
* this package contains five data sets saved in five separate data frames with information about all domestic flights departing from New York City in 2013. 
* These include **Newark Liberty International (EWR)**, **John F. Kennedy International (JFK)**, and **LaGuardia (LGA)** airports:

* `flights`: Information on all 336,776 flights
* `airlines`: A table matching airline names and their two letter IATA airline codes (also known as carrier codes) for 16 airline companies
* `planes`: Information about each of 3,322 physical aircraft used.
* `weather`: Hourly meteorological data for each of the three NYC airports. This data frame has 26,115 rows, roughtly corresponding to the 365 $\times$ 24 $\times$ 3 = 26,280 possible hourly measurements one can observe at three locations over the course of a year.
* `airports`: Airport names, codes, and locations for 1,458 destination airports.

### `flights` data frame

* We will begin by exploring the `flights` data frame that is included in the `nycflights13` package and getting an idea of its structure. 
* Run the following code in your console (either by typing it or cutting & pasting it): it loads in the `flights` dataset into your Console. 
* Note depending on the size of your monitor, the output may vary slightly. 


~~~
flights
~~~
{: .language-r}



~~~
# A tibble: 336,776 x 19
    year month   day dep_time sched_dep_time dep_delay arr_time
   <int> <int> <int>    <int>          <int>     <dbl>    <int>
 1  2013     1     1      517            515         2      830
 2  2013     1     1      533            529         4      850
 3  2013     1     1      542            540         2      923
 4  2013     1     1      544            545        -1     1004
 5  2013     1     1      554            600        -6      812
 6  2013     1     1      554            558        -4      740
 7  2013     1     1      555            600        -5      913
 8  2013     1     1      557            600        -3      709
 9  2013     1     1      557            600        -3      838
10  2013     1     1      558            600        -2      753
# … with 336,766 more rows, and 12 more variables: sched_arr_time <int>,
#   arr_delay <dbl>, carrier <chr>, flight <int>, tailnum <chr>,
#   origin <chr>, dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>,
#   minute <dbl>, time_hour <dttm>
~~~
{: .output}

Let's unpack this output:

* `A tibble: 336,776 x 19`: A `tibble` is a kind of data frame used in R. This particular data frame has
    + `336,776` rows
    + `19` columns corresponding to 19 variables describing each observation
* `year month day dep_time sched_dep_time dep_delay arr_time` are different columns, in other words variables, of this data frame.
* We then have the first 10 rows of observations corresponding to 10 flights.
* `... with 336,766 more rows, and 11 more variables:` indicating to us that 336,766 more rows of data and 11 more variables could not fit in this screen.

### Exploring data frames 

Among the many ways of getting a feel for the data contained in a data frame such as `flights`, we present three functions that take as their "argument", in other words their input, the data frame in question. We also include a fourth method for exploring one particular column of a data frame:

1. Using the `View()` function built for use in RStudio. We will use this the most.
1. Using the `glimpse()` function, which is included in the `dplyr` package.
1. Using the `kable()` function,  which is included in the `knitr` package.
1. Using the `$` operator to view a single variable in a data frame.

**1. `View()`**:

Run `View(flights)` in your Console in RStudio, either by typing it or cutting & pasting it into the Console pane, and explore this data frame in the resulting pop-up viewer. You should get into the habit of always `View`ing any data frames that come your way.  Note the capital "V" in `View`.  R is case-sensitive so you'll receive an error is you run `view(flights)` instead of `View(flights)`.

<div class="learncheck">
**_Learning check_**
</div>


- A. Data on an airline 
- B. Data on a flight
- C. Data on an airport
- D. Data on multiple flights

<div class="learncheck">

</div>

* By running `View(flights)`, we see the different *variables* listed in the columns and we see that there are different types of variables.  
* Some of the variables like `distance`, `day`, and `arr_delay` are what we will call *quantitative* variables. 
* These variables are numerical in nature.  Other variables here are *categorical*.

* Note that if you look in the leftmost column of the `View(flights)` output, you will see a column of numbers.  
* These are the row numbers of the dataset.  
* If you glance across a row with the same number, say row 5, you can get an idea of what each row corresponds to.
* This is often called the *observational unit*.  
* The *observational unit* in this example is an individual flight departing New York City in 2013.  
* You can identify the observational unit by determining what "thing" is being measured or described by each of the variables.

**2. `glimpse()`**:

The second way to explore a data frame is using the `glimpse()` function included in the `dplyr` package. Thus, you can only use the `glimpse()` function after you've loaded the `dplyr` package. This function provides us with an alternative method for exploring a data frame than the `View()` function:


~~~
glimpse(flights)
~~~
{: .language-r}



~~~
Observations: 336,776
Variables: 19
$ year           <int> 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
$ month          <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ day            <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ dep_time       <int> 517, 533, 542, 544, 554, 554, 555, 557, 557, 558,…
$ sched_dep_time <int> 515, 529, 540, 545, 600, 558, 600, 600, 600, 600,…
$ dep_delay      <dbl> 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, …
$ arr_time       <int> 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753…
$ sched_arr_time <int> 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745…
$ arr_delay      <dbl> 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3,…
$ carrier        <chr> "UA", "UA", "AA", "B6", "DL", "UA", "B6", "EV", "…
$ flight         <int> 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, …
$ tailnum        <chr> "N14228", "N24211", "N619AA", "N804JB", "N668DN",…
$ origin         <chr> "EWR", "LGA", "JFK", "JFK", "LGA", "EWR", "EWR", …
$ dest           <chr> "IAH", "IAH", "MIA", "BQN", "ATL", "ORD", "FLL", …
$ air_time       <dbl> 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, …
$ distance       <dbl> 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944,…
$ hour           <dbl> 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6…
$ minute         <dbl> 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ time_hour      <dttm> 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-0…
~~~
{: .output}

* `glimpse()` will give you the first few entries of each variable in a row after the variable. 
* the *data type* of the variable is given immediately after each variable's name inside `< >`.  
* `int` and `dbl` refer to "integer" and "double", which are computer coding terminology for quantitative/numerical variables.  
* `chr` refers to "character", which is computer terminology for text data. Text data, such as the `carrier` or `origin` of a flight, are categorical variables. 
* The `time_hour` variable is an example of one more type of data type: `dttm`. 

<div class="learncheck">
**_Learning check_**
</div>

 What are some examples in this dataset of **categorical** variables?  What makes them different than **quantitative** variables?

<div class="learncheck">

</div>

**3. `kable()`**:

* The final way to explore the entirety of a data frame is using the `kable()` function from the `knitr` package. 
* Let's explore the different carrier codes for all the airlines in our dataset two ways. 
* Run both of these lines of code in your Console:


~~~
airlines
kable(airlines)
~~~
{: .language-r}

At first glance, it may not appear that there is much difference in the outputs. However when using tools for document production such as [R Markdown](http://rmarkdown.rstudio.com/lesson-1.html), the latter code produces output that is much more legible and reader-friendly. 

**4. `$` operator**

Lastly, the `$` operator allows us to explore a single variable within a data frame. For example, run the following in your console


~~~
airlines
airlines$name
~~~
{: .language-r}

* We used the `$` operator to extract only the `name` variable and return it as a vector of length 16.
* We will only be occasionally exploring data frames using this operator, instead favoring the `View()` and `glimpse()` functions.

### Help files

* You can get help in R by entering a `?` before the name of a function or data frame in question and you will be presented with a page showing the documentation. Like so: 


~~~
?flights
~~~
{: .language-r}

